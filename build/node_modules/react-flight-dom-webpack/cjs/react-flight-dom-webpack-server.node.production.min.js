/** @license React vundefined
 * react-flight-dom-webpack-server.node.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

'use strict';function f(b){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+b,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+b+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
var k=JSON.stringify,l="function"===typeof Symbol&&Symbol.for,m=l?Symbol.for("react.element"):60103,n=l?Symbol.for("react.fragment"):60107,p=l?Symbol.for("react.lazy"):60116,q=l?Symbol.for("react.block"):60121,r=l?Symbol.for("react.server.block"):60122;
function t(b,a,d){var c=[],e={destination:a,bundlerConfig:d,nextChunkId:0,pendingChunks:0,pingedSegments:c,completedJSONChunks:[],completedErrorChunks:[],flowing:!1,toJSON:function(a,b){return w(e,this,a,b)}};e.pendingChunks++;a=x(e,function(){return b});c.push(a);return e}function y(b,a){var d=b.pingedSegments;d.push(a);1===d.length&&setImmediate(function(){return z(b)})}function x(b,a){var d={id:b.nextChunkId++,query:a,ping:function(){return y(b,d)}};return d}
function w(b,a,d,c){switch(c){case m:return"$";case r:return"@";case p:case q:throw Error(f(352));}if(a[0]===r)switch(d){case "1":try{return b.bundlerConfig[c]}catch(e){return b.pendingChunks++,a=b.nextChunkId++,A(b,a,e),"$"+a.toString(16)}case "2":a=c;try{return a()}catch(e){if("object"===typeof e&&null!==e&&"function"===typeof e.then)return b.pendingChunks++,b=x(b,a),a=b.ping,e.then(a,a),"$"+b.id.toString(16);b.pendingChunks++;a=b.nextChunkId++;A(b,a,e);return"$"+a.toString(16)}default:throw Error(f(353));
}if("string"===typeof c)return b="$"===c[0]||"@"===c[0]?"$"+c:c,b;for(;"object"===typeof c&&null!==c&&c.$$typeof===m;)if(b=c,a=b.type,d=b.props,"function"===typeof a)c=a(d);else if("string"===typeof a||a[0]===r)c=[m,a,b.key,b.props];else if(a===n)c=b.props.children;else throw Error(f(351));return c}
function A(b,a,d){var c="";try{if(d instanceof Error){var e=""+d.message;c=""+d.stack}else e="Error: "+d}catch(g){e="An error occurred but serializing the error message failed."}d={message:e,stack:c};a="E"+a.toString(16)+":"+k(d)+"\n";a=Buffer.from(a,"utf8");b.completedErrorChunks.push(a)}
function z(b){var a=b.pingedSegments;b.pingedSegments=[];for(var d=0;d<a.length;d++){var c=b,e=a[d],g=e.query;try{var B=g();g=void 0;var u=e.id,v=k(B,c.toJSON);g=0===u?v+"\n":"J"+u.toString(16)+":"+v+"\n";var E=Buffer.from(g,"utf8");c.completedJSONChunks.push(E)}catch(h){"object"===typeof h&&null!==h&&"function"===typeof h.then?(c=e.ping,h.then(c,c)):A(c,e.id,h)}}b.flowing&&C(b)}var D=!1;
function C(b){if(!D){D=!0;var a=b.destination;"function"===typeof a.cork&&a.cork();try{for(var d=b.completedJSONChunks,c=0;c<d.length;c++)if(b.pendingChunks--,!a.write(d[c])){b.flowing=!1;c++;break}d.splice(0,c);var e=b.completedErrorChunks;for(c=0;c<e.length;c++)if(b.pendingChunks--,!a.write(e[c])){b.flowing=!1;c++;break}e.splice(0,c)}finally{D=!1,"function"===typeof a.uncork&&a.uncork()}"function"===typeof a.flush&&"function"!==typeof a.flushHeaders&&a.flush();0===b.pendingChunks&&a.end()}}
function F(b){b.flowing=!0;setImmediate(function(){return z(b)})}function G(b,a){return function(){a.flowing=!0;C(a)}}exports.pipeToNodeWritable=function(b,a,d){b=t(b,a,d);a.on("drain",G(a,b));F(b)};
